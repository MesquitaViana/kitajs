fastify.get(
  '{{url}}',
  {
    schema: {{json schema}},
    websocket: true,
    {{options}}
  },
  //@ts-ignore - we may have unused params
  async (connection, request) => {
    {{#each parameters}}
      {{#if helper}}
        {{helper}}

        if (reply.sent) {
          return;
        }
        
       {{/if}}
    {{/each}}

    return {{controllerName}}.ws.apply(context, [{{paramsToString parameters}}]);
  }
);