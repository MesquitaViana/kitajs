fastify.{{lowercase method}}(
  '{{url}}',
  {
    schema: 
    {{#if (hasSchemaTransformers parameters)}}
      await Promise.resolve({{json schema}})
      {{#each parameters}}
        {{#if schemaTransformer}}
          .then(
            schema => {{schemaTransformer}}.transformSchema(
              schema {{#if schemaTransformerOptions}}, {{paramsToString schemaTransformerOptions}} {{/if}}
            )
          )
        {{/if}}
      {{/each}}
    {{else}}
      {{json schema}}
    {{/if}}
    ,
    {{options}}
  },
  //@ts-ignore - we may have unused params
  async (request, reply) => {
    {{#each parameters}}
      {{#if helper}}
        {{helper}}

        if (reply.sent) {
          return;
        }

       {{/if}}
    {{/each}}

    return {{controllerName}}.{{controllerMethod}}({{paramsToString parameters}});
  }
);